---
layout: post
title: Oreons placing blocks
subtitle: GSoC Week 6 update
js: [/js/github-buttons.js, /js/required.js]
image: /img/hello_world.jpeg
ext-js: https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js
css: [/css/required.css, /css/github-buttons.css]
---
The week 6 of my work period involved a significant overhaul of the gameplay for the MasterOfOreon module. About a week ago, an Oreon would walk to an area assigned for the task and voil√† task compeleted, an event which was only manifested by the removal of the area rendering.
 Now, blocks are being placed into the world as an outcome of the tasks being completed.
## Modifications to the Oreons' behaviors
A lot of modifications were made to the the Behavior tree of the Oreons in order to get the effect of tasks being performed for a period of time and then completed with the blocks being spawned. Different types of tasks, would involve different animations being run, so to implement this
the Oreon BT diverges, at a point where it has been assigned a task and reached the target in the selected area, into various `guard` nodes which check for the `assignedTaskType` and decide the tree to "lookup" according to it. As an initial step only the `build` and `plant` behavior trees have
been implemented. 
```json
{
    "sequence" : [
        {

            "animation": {
                "play": "MasterOfOreon:Build.animationPool",
                "loop": "MasterOfOreon:Build.animationPool"
            }

        },
        {
            "check_task_status" : {
                "child" : "move_to"
            }
        },
        "perform_task"
    ]
}
```
These new BTs are run when the Oreon has reached the target and is ready to perform a task, an animation simulating the Oreon performing a task is played until the subsequent child node `check_task_status` returns `SUCCESS`. The `check_task_status` node
consists of the logic which checks whether the game time is beyond the time of completion of the task, which is defined in a `taskCompletionTime` field in the task component attached to the Oreon entity at the time of task assignment. This node returns a `FAILURE` until this time is 
reached and in the meantime, it also sets the target of the Oreon to a random nearby block in the selected area, this makes the Oreon move in the entire assigned area swirling its hammer in the process :D. The animation and check_task_status node are parented by a `sequence` node
 it is re-run until all its child nodes returns success, so until the task completion time is reached the animation is run thus creating the desired effect. After the task is completed the `perform_task` node is triggered, this is where the block-placing "magic" takes place.

## Plant crops and watch'em grow

## Construct a building

#### Conundrum : DynamicCities or StructureTemplates

#### Tackling a GooeysQuests bug
engine PR